@import "~@kaizen/design-tokens/sass/typography";
@import "~@kaizen/design-tokens/sass/color";
@import "~@kaizen/design-tokens/sass/spacing";
@import "~@kaizen/design-tokens/sass/border";
@import "~@kaizen/design-tokens/sass/shadow";
@import "../../mixins";

$cell-border-radius: 3px;
$rdp-cell-size: 40px;

.container {
  display: flex;
}

.months {
  display: flex;
  box-shadow: $shadow-large-box-shadow;
  border-radius: $cell-border-radius;
}

.month {
  margin: $spacing-md;
}

// Nav + date buttons
.buttonReset {
  @include button-reset;
}

.button {
  &:not([aria-disabled="true"]) {
    cursor: pointer;
  }

  &[aria-disabled="true"] {
    pointer-events: none;
    color: rgba($color-purple-800-rgb, 0.3);
    opacity: 1;

    :global(.js-focus-visible) & {
      // hide native focus ring when :focus but not :focus-visible
      &:focus {
        outline: none;
        border: 2px solid transparent;
      }
      // show custom focus ring when :focus-visible
      &:global(.focus-visible) {
        color: rgba($color-purple-800-rgb, 0.3);
        outline-offset: 1px;
        background-color: transparent;
        opacity: 1;
        outline: $color-gray-300 $border-dashed-border-style
          $border-focus-ring-border-width;
      }
    }
  }
}

.caption {
  position: relative;
  display: flex;
  text-align: center;
  align-items: center;
  justify-content: center;
  margin: 0 0 $spacing-xs;
  padding: 0;
}

.captionLabel {
  position: relative;
  z-index: 1;
  display: inline-flex;
  align-items: center;
  margin: 0;
  padding: 0 0.25em;
  white-space: nowrap;
  font-family: $typography-heading-4-font-family;
  font-size: $typography-heading-4-font-size;
  font-weight: $typography-heading-5-font-weight;
  line-height: $typography-heading-4-line-height;
  letter-spacing: $typography-heading-4-letter-spacing;
  color: $color-purple-800;
}

.nav {
  position: absolute;
  display: flex;
  justify-content: space-between;
  width: 100%;
  color: $color-purple-800;
}

.navButton {
  &:not([aria-disabled="true"]) {
    @include button-reset;
    display: inherit;
    padding: 0.25rem $spacing-xs;
    border: $border-solid-border-width $border-solid-border-style transparent;
    border-radius: $cell-border-radius;

    &:hover,
    &:global(.story__datepicker__calendar--hover) {
      background-color: $color-blue-100;
      color: $color-blue-500;
    }

    :global(.js-focus-visible) & {
      // hide native focus ring when :focus but not :focus-visible
      &:focus {
        outline: none;
        border: 2px solid transparent;
      }

      // show custom focus ring when :focus-visible
      &:global(.focus-visible) {
        outline-offset: 1px;
        outline: $color-blue-500 $border-focus-ring-border-style
          $border-focus-ring-border-width;
        background-color: $color-blue-100;
        color: $color-blue-500;
      }
    }
  }
}

.navButtonNext {
  right: 0;

  [dir="rtl"] & {
    left: 0;
    right: auto;
  }
}

.table {
  border-collapse: separate;
  border-spacing: 1px;
  margin: 0;
  max-width: calc(#{$rdp-cell-size} * 7);
}

.tbody {
  border: 0;
  font-family: $typography-paragraph-body-font-family;
  font-size: $typography-paragraph-body-font-size;
  letter-spacing: $typography-paragraph-body-letter-spacing;
  font-weight: $typography-paragraph-body-font-weight;
  line-height: $typography-paragraph-body-line-height;
}

.weekday {
  padding: 0.5em;
  font-family: $typography-paragraph-body-font-family;
  font-size: $typography-paragraph-body-font-size;
  letter-spacing: $typography-paragraph-body-letter-spacing;
  font-weight: $typography-paragraph-body-font-weight;
  line-height: $typography-paragraph-body-line-height;
  color: $color-purple-800;
}

.cell {
  width: $rdp-cell-size;
  height: $rdp-cell-size;
  padding: 0;
  text-align: center;
}

.day {
  display: flex;
  overflow: hidden;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: $rdp-cell-size;
  max-width: $rdp-cell-size;
  height: $rdp-cell-size;
  margin: 0;
  border: 2px solid transparent;
  padding: calc(#{$spacing-md} / 3) 0.625rem;
  border-radius: $cell-border-radius;
  color: $color-purple-800;

  :global(.js-focus-visible) & {
    // hide native focus ring when :focus but not :focus-visible
    &:focus {
      outline: none;
      border: 2px solid transparent;
    }

    // show custom focus ring when :focus-visible
    &:global(.focus-visible) {
      outline-offset: 1px;
      outline: $color-blue-500 $border-focus-ring-border-style
        $border-focus-ring-border-width;
      background-color: $color-blue-100;
      color: $color-blue-500;
      &.daySelected {
        background-color: $color-blue-400;
        color: $color-white;
      }
    }
  }

  &:not([aria-disabled="true"]) {
    &:not(.outside) {
      &:hover,
      &:global(.story__datepicker__calendar--hover) {
        background-color: $color-blue-200;
        color: $color-blue-500;
      }

      &:not(.daySelected) {
        &:hover,
        &:global(.story__datepicker__calendar--hover) {
          border-radius: $cell-border-radius;
          background-color: $color-blue-100;
          color: $color-blue-500;
        }
      }
    }
  }
}

.daySelected {
  &:not([aria-disabled="true"]) {
    &:not(.outside) {
      border-radius: $cell-border-radius;
      background-color: $color-blue-500;
      color: $color-white;

      &:hover,
      &:global(.story__datepicker__calendar--hover) {
        background-color: $color-blue-400;
        color: $color-white;
      }
    }
  }
}

.dayToday:not(.outside) {
  color: $color-blue-500;
  font-weight: bold;
}

.dayRangeStart:not(.outside),
.dayRangeEnd:not(.outside) {
  border-radius: $cell-border-radius;
  background-color: $color-blue-500;
  color: $color-white;
}

.dayRangeMiddle:not([aria-disabled="true"]):not(.outside):not(.from):not(.to):not(:hover) {
  background-color: $color-blue-100;
  color: $color-blue-500;
}

.vHidden {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  background: transparent;
  border: 0;
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  position: absolute;
  top: 0;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  overflow: hidden !important;
  clip: rect(1px, 1px, 1px, 1px) !important;
  border: 0 !important;
}