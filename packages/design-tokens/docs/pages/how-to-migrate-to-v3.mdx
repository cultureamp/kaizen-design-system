import { Meta } from "@storybook/blocks"
import exampleSass from '!!raw-loader!./examples/example.scss'
import { CodeBlock } from '../DocsComponents'
import { LinkTo } from "~storybook/components/LinkTo"
import cssVariableReplacementDiffExample from '!!raw-loader!./examples/cssVariableReplacement.diff'

<Meta title="Systems/Tokens/How to migrate from V2 to V3" parameters={{ docsOnly: true }} />

# How to migrate from V2 to V3 of design tokens

## 1. Update @kaizen/design-tokens to the latest 2.x version

* The late releases of version 2 contain both old and new tokens. This will allow you to gradually migrate to the new.

## 2. Setup a ThemeManager

Ensure you have followed the steps in <LinkTo pageId="systems-tokens-getting-started">Getting started</LinkTo> to setup your application for using design tokens.

## 3. Replace tokens with their CSS variable sibling

<CodeBlock language="diff" code={cssVariableReplacementDiffExample} />

Be careful of places where color mixing or rgba functions are used in SASS, as these won't work anymore. See <LinkTo pageId="systems-tokens-how-to-use-design-tokens-in-sass">How to use design tokens in SASS</LinkTo>.

Team Foundations will release a codemod or stylint plugin to assist with this migration.

## 4. Update @kaizen/design-tokens to V3 when released.

There are two significant and breaking changes that are occurring as of the next release:

* The top level token namespace will be removed; tokens will be named `$color-purple-100`, `$spacing-md` etc, without any `kz` or `kz-var` prefix.

* The names of the color tokens will use their common name, not the descriptive one. For example, Wisteria becomes Purple, Cluny becomes Blue and so on.
* This is not an exhaustive list of changes, there may be other breaking changes. Follow #updates_design_systems on Slack to stay informed.
