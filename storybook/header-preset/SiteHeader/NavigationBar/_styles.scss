@import "~@kaizen/design-tokens/sass/spacing";
@import "~@kaizen/design-tokens/sass/color";
@import "~@kaizen/design-tokens/sass/border";
@import "~@kaizen/design-tokens/sass/layout";
@import "~@kaizen/deprecated-component-library-helpers/styles/color";
@import "~@kaizen/deprecated-component-library-helpers/styles/type";
@import "@kaizen/component-library/styles/responsive";
@import "./decision-tokens";

$ca-navigation-bar__height: $layout-navigation-bar-height;
$ca-navigation-bar__animation-ease: cubic-bezier(0.55, 0.085, 0.68, 0.53);
$ca-navigation-bar__animation-timing: 150ms;
$ca-navigation-bar__link-item-indicator-height: 3px;
$ca-navigation-bar__link-item-margin: $spacing-xs;
$ca-weight-medium: 500;
$link-margin: $spacing-xs;

@mixin ca-navigation-bar__link-item {
  @extend %ca-navigation-bar__menu-item-focus;
  @include ca-type-reverse;

  // fill parent
  display: flex;
  min-width: 2 * $ca-grid;
  margin: $spacing-xs 0;

  // center child
  align-items: center;
  justify-content: center;
  border-radius: $border-solid-border-radius;
  color: rgba($color-white-rgb, 0.8);
  padding: 0;
  text-decoration: none;

  &.active {
    color: white; // override hyperlink hover color
    outline: none; // override native focus styles
    text-decoration: none;

    .linkText::before {
      transform: translateY(calc(-1 * #{$link-margin}));
    }
  }

  // active indicator
  .linkText::before {
    content: "";
    display: block;
    transform: translateY(calc(-1 * #{$ca-navigation-bar__link-item-margin}))
      translateY(-100%);
    height: $ca-navigation-bar__link-item-indicator-height;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    background-color: white;
    transition: transform $ca-navigation-bar__animation-ease
      $ca-navigation-bar__animation-timing;
  }

  &:hover {
    color: white; // override hyperlink hover color
    text-decoration: none;

    .linkText::before {
      transform: translateY(calc(-1 * #{$ca-navigation-bar__link-item-margin}));
    }
  }

  @include ca-type-inter-heading;

  position: static;
  top: 0;
}

%ca-navigation-bar {
  display: flex;
  flex-direction: row;
  background-color: $dt-color-background-color-default;
  height: $layout-navigation-bar-height;
  width: 100%;
  position: fixed;

  @media print {
    display: none;
  }
}

%ca-navigation-bar__menu-item-focus {
  :global(.js-focus-visible) & {
    // hide native focus ring when :focus but not :focus-visible
    &:focus {
      outline: none;
    }

    // show custom focus ring when :focus-visible
    &:global(.focus-visible) {
      color: white;
      outline: 2px solid $color-blue-500;
    }
  }
}
