import{R as a,r as l}from"./index-CTjT7uj6.js";import{b as B,$ as S,c as F,d as W,a as k}from"./utils-e-dMXvly.js";import{u as D,m as A}from"./mergeClassNames-DEvgSslo.js";import{$ as U,a as q,b as K}from"./OverlayArrow-5tjFEuMh.js";import{$ as V,a as z}from"./useOverlayTriggerState-B1dSu2Ro.js";import{$ as Y,c as j}from"./useFocusable-CuIK6Qs-.js";import{b as w,a as G,o as J,d as Q,c as X}from"./focusSafely-ByiDPXQJ.js";import{$ as I}from"./useHover-Bq751pFs.js";import{a as Z}from"./usePress-nudZ2Xgz.js";import{R as ee}from"./index-9r8iugjR.js";import{$ as te}from"./SSRProvider-C8o06Znb.js";const T=a.createContext(null);function oe(e){let{children:t}=e,o=l.useContext(T),[i,s]=l.useState(0),c=l.useMemo(()=>({parent:o,modalCount:i,addModal(){s(r=>r+1),o&&o.addModal()},removeModal(){s(r=>r-1),o&&o.removeModal()}}),[o,i]);return a.createElement(T.Provider,{value:c},t)}function re(){let e=l.useContext(T);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:null}}}function ne(e){let{modalProviderProps:t}=re();return a.createElement("div",{"data-overlay-container":!0,...e,...t})}function ae(e){return a.createElement(oe,null,a.createElement(ne,e))}function le(e){let t=te(),{portalContainer:o=t?null:document.body,...i}=e;if(a.useEffect(()=>{if(o!=null&&o.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[o]),!o)return null;let s=a.createElement(ae,i);return ee.createPortal(s,o)}function ie(e,t){let o=Z(e,{labelable:!0}),{hoverProps:i}=I({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:w(o,i,{role:"tooltip"})}}function se(e,t,o){let{isDisabled:i,trigger:s}=e,c=G(),r=l.useRef(!1),n=l.useRef(!1),f=()=>{(r.current||n.current)&&t.open(n.current)},d=x=>{!r.current&&!n.current&&t.close(x)};l.useEffect(()=>{let x=C=>{o&&o.current&&C.key==="Escape"&&(C.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",x,!0),()=>{document.removeEventListener("keydown",x,!0)}},[o,t]);let b=()=>{s!=="focus"&&(J()==="pointer"?r.current=!0:r.current=!1,f())},v=()=>{s!=="focus"&&(n.current=!1,r.current=!1,d())},g=()=>{n.current=!1,r.current=!1,d(!0)},E=()=>{Q()&&(n.current=!0,f())},u=()=>{n.current=!1,r.current=!1,d(!0)},{hoverProps:L}=I({isDisabled:i,onHoverStart:b,onHoverEnd:v}),{focusableProps:N}=Y({isDisabled:i,onFocus:E,onBlur:u},o);return{triggerProps:{"aria-describedby":t.isOpen?c:void 0,...w(N,L,{onPointerDown:g,onKeyDown:g})},tooltipProps:{id:c}}}const ce=1500,O=500;let $={},de=0,y=!1,p=null,m=null;function M(e={}){let{delay:t=ce,closeDelay:o=O}=e,{isOpen:i,open:s,close:c}=V(e),r=l.useMemo(()=>`${++de}`,[]),n=l.useRef(void 0),f=l.useRef(c),d=()=>{$[r]=g},b=()=>{for(let u in $)u!==r&&($[u](!0),delete $[u])},v=()=>{clearTimeout(n.current),n.current=null,b(),d(),y=!0,s(),p&&(clearTimeout(p),p=null),m&&(clearTimeout(m),m=null)},g=u=>{u||o<=0?(clearTimeout(n.current),n.current=null,f.current()):n.current||(n.current=setTimeout(()=>{n.current=null,f.current()},o)),p&&(clearTimeout(p),p=null),y&&(m&&clearTimeout(m),m=setTimeout(()=>{delete $[r],m=null,y=!1},Math.max(O,o)))},E=()=>{b(),d(),!i&&!p&&!y?p=setTimeout(()=>{p=null,y=!0,v()},t):i||v()};return l.useEffect(()=>{f.current=c},[c]),l.useEffect(()=>()=>{clearTimeout(n.current),$[r]&&delete $[r]},[r]),{isOpen:i,open:u=>{!u&&t>0&&!n.current?E():v()},close:g}}const h=l.createContext(null),P=l.createContext(null);function fe(e){let t=M(e),o=l.useRef(null),{triggerProps:i,tooltipProps:s}=se(e,t,o);return a.createElement(B,{values:[[h,t],[P,{...s,triggerRef:o}]]},a.createElement(j,{...i,ref:o},e.children))}function ue({UNSTABLE_portalContainer:e,...t},o){[t,o]=S(t,o,P);let i=l.useContext(h),s=M(t),c=t.isOpen!=null||t.defaultOpen!=null||!i?s:i,r=F(o,c.isOpen)||t.isExiting||!1;return!c.isOpen&&!r?null:a.createElement(le,{portalContainer:e},a.createElement($e,{...t,tooltipRef:o,isExiting:r}))}const pe=l.forwardRef(ue);function $e(e){let t=l.useContext(h),o=l.useRef(null),[i,s]=l.useState(0);X(()=>{o.current&&t.isOpen&&s(o.current.getBoundingClientRect().width)},[t.isOpen,o]);let{overlayProps:c,arrowProps:r,placement:n}=U({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:i,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip}),f=W(e.tooltipRef,!!n)||e.isEntering||!1,d=k({...e,defaultClassName:"react-aria-Tooltip",values:{placement:n,isEntering:f,isExiting:e.isExiting,state:t}});e=w(e,c);let{tooltipProps:b}=ie(e,t);return a.createElement("div",{...b,ref:e.tooltipRef,...d,style:{...c.style,...d.style},"data-placement":n,"data-entering":f||void 0,"data-exiting":e.isExiting||void 0},a.createElement(q.Provider,{value:{...r,placement:n,ref:o}},d.children))}const me="_overlayArrow_ycce2_3",be="_reversed_ycce2_26",_={overlayArrow:me,reversed:be},H=e=>{const t=D();return a.createElement(K,{...e,className:A(_.overlayArrow,t&&_.reversed,e.className)},a.createElement("svg",{width:8,height:8,viewBox:"0 0 8 8"},a.createElement("path",{d:"M0 0 L4 4 L8 0"})))};H.__docgenInfo={description:`An OverlayArrow renders a custom arrow element relative to an overlay element
such as a popover or tooltip such that it aligns with a trigger element.`,methods:[],displayName:"OverlayArrow"};const ve="_tooltip_3axs2_7",ge="_reversed_3axs2_24",xe="_slide_3axs2_1",R={tooltip:ve,reversed:ge,slide:xe},ye=l.forwardRef(({children:e,className:t,...o},i)=>{const[{triggerRef:s}]=S({children:e,className:t,...o},i,P),c=l.useContext(h),r=D(),[n,f]=l.useState(!1);return l.useLayoutEffect(()=>{var d;f(!!((d=s==null?void 0:s.current)!=null&&d.getAttribute("data-inline-hidden-content")))},[s]),a.createElement(a.Fragment,null,a.createElement(pe,{ref:i,offset:8,...o,className:A(R.tooltip,t,r&&R.reversed)},d=>a.createElement(a.Fragment,null,a.createElement(H,null),typeof e=="function"?e(d):e)),n?a.createElement(z,null,typeof e=="function"?e({placement:"center",isEntering:!1,isExiting:!1,state:c,defaultChildren:void 0}):e):null)});ye.__docgenInfo={description:"A tooltip displays a description of an element on hover or focus.",methods:[],displayName:"Tooltip"};const he=e=>a.createElement(fe,{delay:300,closeDelay:300,...e});he.__docgenInfo={description:`TooltipTrigger wraps around a trigger element and a Tooltip. It handles opening and closing
the Tooltip when the user hovers over or focuses the trigger, and positioning the Tooltip
relative to the trigger.`,methods:[],displayName:"TooltipTrigger",props:{delay:{required:!1,tsType:{name:"number"},description:`The delay time for the tooltip to show up. [See guidelines](https://spectrum.adobe.com/page/tooltip/#Immediate-or-delayed-appearance).
@default 300`},closeDelay:{required:!1,tsType:{name:"number"},description:`The delay time for the tooltip to close. [See guidelines](https://spectrum.adobe.com/page/tooltip/#Warmup-and-cooldown).
@default 300`}}};export{he as T,ye as a};
