import{$ as p,i as P,b,j as x,k as g}from"./focusSafely-ByiDPXQJ.js";import{r as c,R as i}from"./index-CTjT7uj6.js";function v(e){const t=c.useRef(null);return c.useMemo(()=>({get current(){return t.current},set current(r){t.current=r,typeof e=="function"?e(r):e&&(e.current=r)}}),[e])}function F(e){let{isDisabled:t,onFocus:r,onBlur:o,onFocusChange:n}=e;const u=c.useCallback(a=>{if(a.target===a.currentTarget)return o&&o(a),n&&n(!1),!0},[o,n]),s=p(u),f=c.useCallback(a=>{const $=P(a.target);a.target===a.currentTarget&&$.activeElement===a.target&&(r&&r(a),n&&n(!0),s(a))},[n,r,s]);return{focusProps:{onFocus:!t&&(r||n||o)?f:void 0,onBlur:!t&&(o||n)?u:void 0}}}function d(e){if(!e)return;let t=!0;return r=>{let o={...r,preventDefault(){r.preventDefault()},isDefaultPrevented(){return r.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){t=!1}};e(o),t&&r.stopPropagation()}}function D(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:d(e.onKeyDown),onKeyUp:d(e.onKeyUp)}}}let l=i.createContext(null);function h(e){let t=c.useContext(l)||{};g(t,e);let{ref:r,...o}=t;return o}function y(e,t){let{children:r,...o}=e,n=v(t),u={...o,ref:n};return i.createElement(l.Provider,{value:u},r)}let k=i.forwardRef(y);function B(e,t){let{focusProps:r}=F(e),{keyboardProps:o}=D(e),n=b(r,o),u=h(t),s=e.isDisabled?{}:u,f=c.useRef(e.autoFocus);return c.useEffect(()=>{f.current&&t.current&&x(t.current),f.current=!1},[t]),{focusableProps:b({...n,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},s)}}export{B as $,v as a,F as b,k as c,D as d};
