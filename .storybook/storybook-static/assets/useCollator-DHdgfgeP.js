import{a as Q,c as w,f as Z,p as O,i as E,j as V}from"./focusSafely-ByiDPXQJ.js";import{r as m,R as L}from"./index-CTjT7uj6.js";import{$ as G}from"./context-AGV5_Mtb.js";function ye(e,t){let{id:r,"aria-label":n,"aria-labelledby":o}=e;return r=Q(r),o&&n?o=[...new Set([r,...o.trim().split(/\s+/)])].join(" "):o&&(o=o.trim().split(/\s+/).join(" ")),!n&&!o&&t&&(n=t),{id:r,"aria-label":n,"aria-labelledby":o}}function ee(e,t){let r=window.getComputedStyle(e),n=/(auto|scroll)/.test(r.overflow+r.overflowX+r.overflowY);return n&&t&&(n=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),n}function te(e,t){const r=[];for(;e&&e!==document.documentElement;)ee(e,t)&&r.push(e),e=e.parentElement;return r}let re=0;const M=new Map;function xe(e){let[t,r]=m.useState();return w(()=>{if(!e)return;let n=M.get(e);if(n)r(n.element.id);else{let o=`react-aria-description-${re++}`;r(o);let a=document.createElement("div");a.id=o,a.style.display="none",a.textContent=e,document.body.appendChild(a),n={refCount:0,element:a},M.set(e,n)}return n.refCount++,()=>{n&&--n.refCount===0&&(n.element.remove(),M.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}function Se(e,t,r,n){let o=Z(r),a=r==null;m.useEffect(()=>{if(a||!e.current)return;let i=e.current;return i.addEventListener(t,o,n),()=>{i.removeEventListener(t,o,n)}},[e,t,n,a,o])}function ne(e,t){let r=B(e,t,"left"),n=B(e,t,"top"),o=t.offsetWidth,a=t.offsetHeight,i=e.scrollLeft,l=e.scrollTop,{borderTopWidth:d,borderLeftWidth:c}=getComputedStyle(e),u=e.scrollLeft+parseInt(c,10),f=e.scrollTop+parseInt(d,10),v=u+e.clientWidth,s=f+e.clientHeight;r<=i?i=r-parseInt(c,10):r+o>v&&(i+=r+o-v),n<=f?l=n-parseInt(d,10):n+a>s&&(l+=n+a-s),e.scrollLeft=i,e.scrollTop=l}function B(e,t,r){const n=r==="left"?"offsetLeft":"offsetTop";let o=0;for(;t.offsetParent&&(o+=t[n],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[n];break}t=t.offsetParent}return o}function Le(e,t){if(document.contains(e)){let i=document.scrollingElement||document.documentElement;if(window.getComputedStyle(i).overflow==="hidden"){let d=te(e);for(let c of d)ne(c,e)}else{var r;let{left:d,top:c}=e.getBoundingClientRect();e==null||(r=e.scrollIntoView)===null||r===void 0||r.call(e,{block:"nearest"});let{left:u,top:f}=e.getBoundingClientRect();if(Math.abs(d-u)>1||Math.abs(c-f)>1){var n,o,a;t==null||(o=t.containingElement)===null||o===void 0||(n=o.scrollIntoView)===null||n===void 0||n.call(o,{block:"center",inline:"center"}),(a=e.scrollIntoView)===null||a===void 0||a.call(e,{block:"nearest"})}}}}function oe(e){const t=O(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:r,visibility:n}=e.style,o=r!=="none"&&n!=="hidden"&&n!=="collapse";if(o){const{getComputedStyle:a}=e.ownerDocument.defaultView;let{display:i,visibility:l}=a(e);o=i!=="none"&&l!=="hidden"&&l!=="collapse"}return o}function ae(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function X(e,t){return e.nodeName!=="#comment"&&oe(e)&&ae(e,t)&&(!e.parentElement||X(e.parentElement,e))}const z=L.createContext(null),D="react-aria-focus-scope-restore";let b=null;function Ce(e){let{children:t,contain:r,restoreFocus:n,autoFocus:o}=e,a=m.useRef(null),i=m.useRef(null),l=m.useRef([]),{parentNode:d}=m.useContext(z)||{},c=m.useMemo(()=>new K({scopeRef:l}),[l]);w(()=>{let v=d||$.root;if($.getTreeNode(v.scopeRef)&&b&&!F(b,v.scopeRef)){let s=$.getTreeNode(b);s&&(v=s)}v.addChild(c),$.addNode(c)},[c,d]),w(()=>{let v=$.getTreeNode(l);v&&(v.contain=!!r)},[r]),w(()=>{var v;let s=(v=a.current)===null||v===void 0?void 0:v.nextSibling,p=[],y=k=>k.stopPropagation();for(;s&&s!==i.current;)p.push(s),s.addEventListener(D,y),s=s.nextSibling;return l.current=p,()=>{for(let k of p)k.removeEventListener(D,y)}},[t]),de(l,n,r),ue(l,r),be(l,n,r),fe(l,o),m.useEffect(()=>{const v=E(l.current?l.current[0]:void 0).activeElement;let s=null;if(h(v,l.current)){for(let p of $.traverse())p.scopeRef&&h(v,p.scopeRef.current)&&(s=p);s===$.getTreeNode(l)&&(b=s.scopeRef)}},[l]),w(()=>()=>{var v,s,p;let y=(p=(s=$.getTreeNode(l))===null||s===void 0||(v=s.parent)===null||v===void 0?void 0:v.scopeRef)!==null&&p!==void 0?p:null;(l===b||F(l,b))&&(!y||$.getTreeNode(y))&&(b=y),$.removeTreeNode(l)},[l]);let u=m.useMemo(()=>le(l),[]),f=m.useMemo(()=>({focusManager:u,parentNode:c}),[c,u]);return L.createElement(z.Provider,{value:f},L.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,L.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:i}))}function le(e){return{focusNext(t={}){let r=e.current,{from:n,tabbable:o,wrap:a,accept:i}=t,l=n||E(r[0]).activeElement,d=r[0].previousElementSibling,c=T(r),u=g(c,{tabbable:o,accept:i},r);u.currentNode=h(l,r)?l:d;let f=u.nextNode();return!f&&a&&(u.currentNode=d,f=u.nextNode()),f&&N(f,!0),f},focusPrevious(t={}){let r=e.current,{from:n,tabbable:o,wrap:a,accept:i}=t,l=n||E(r[0]).activeElement,d=r[r.length-1].nextElementSibling,c=T(r),u=g(c,{tabbable:o,accept:i},r);u.currentNode=h(l,r)?l:d;let f=u.previousNode();return!f&&a&&(u.currentNode=d,f=u.previousNode()),f&&N(f,!0),f},focusFirst(t={}){let r=e.current,{tabbable:n,accept:o}=t,a=T(r),i=g(a,{tabbable:n,accept:o},r);i.currentNode=r[0].previousElementSibling;let l=i.nextNode();return l&&N(l,!0),l},focusLast(t={}){let r=e.current,{tabbable:n,accept:o}=t,a=T(r),i=g(a,{tabbable:n,accept:o},r);i.currentNode=r[r.length-1].nextElementSibling;let l=i.previousNode();return l&&N(l,!0),l}}}const j=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],ie=j.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";j.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const ce=j.join(':not([hidden]):not([tabindex="-1"]),');function T(e){return e[0].parentElement}function S(e){let t=$.getTreeNode(b);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function ue(e,t){let r=m.useRef(void 0),n=m.useRef(void 0);w(()=>{let o=e.current;if(!t){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}const a=E(o?o[0]:void 0);let i=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!S(e)||c.isComposing)return;let u=a.activeElement,f=e.current;if(!f||!h(u,f))return;let v=T(f),s=g(v,{tabbable:!0},f);if(!u)return;s.currentNode=u;let p=c.shiftKey?s.previousNode():s.nextNode();p||(s.currentNode=c.shiftKey?f[f.length-1].nextElementSibling:f[0].previousElementSibling,p=c.shiftKey?s.previousNode():s.nextNode()),c.preventDefault(),p&&N(p,!0)},l=c=>{(!b||F(b,e))&&h(c.target,e.current)?(b=e,r.current=c.target):S(e)&&!C(c.target,e)?r.current?r.current.focus():b&&b.current&&I(b.current):S(e)&&(r.current=c.target)},d=c=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{if(a.activeElement&&S(e)&&!C(a.activeElement,e))if(b=e,a.body.contains(c.target)){var u;r.current=c.target,(u=r.current)===null||u===void 0||u.focus()}else b.current&&I(b.current)})};return a.addEventListener("keydown",i,!1),a.addEventListener("focusin",l,!1),o==null||o.forEach(c=>c.addEventListener("focusin",l,!1)),o==null||o.forEach(c=>c.addEventListener("focusout",d,!1)),()=>{a.removeEventListener("keydown",i,!1),a.removeEventListener("focusin",l,!1),o==null||o.forEach(c=>c.removeEventListener("focusin",l,!1)),o==null||o.forEach(c=>c.removeEventListener("focusout",d,!1))}},[e,t]),w(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function q(e){return C(e)}function h(e,t){return!e||!t?!1:t.some(r=>r.contains(e))}function C(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:r}of $.traverse($.getTreeNode(t)))if(r&&h(e,r.current))return!0;return!1}function Fe(e){return C(e,b)}function F(e,t){var r;let n=(r=$.getTreeNode(t))===null||r===void 0?void 0:r.parent;for(;n;){if(n.scopeRef===e)return!0;n=n.parent}return!1}function N(e,t=!1){if(e!=null&&!t)try{V(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function J(e,t=!0){let r=e[0].previousElementSibling,n=T(e),o=g(n,{tabbable:t},e);o.currentNode=r;let a=o.nextNode();return t&&!a&&(n=T(e),o=g(n,{tabbable:!1},e),o.currentNode=r,a=o.nextNode()),a}function I(e,t=!0){N(J(e,t))}function fe(e,t){const r=L.useRef(t);m.useEffect(()=>{if(r.current){b=e;const n=E(e.current?e.current[0]:void 0);!h(n.activeElement,b.current)&&e.current&&I(e.current)}r.current=!1},[e])}function de(e,t,r){w(()=>{if(t||r)return;let n=e.current;const o=E(n?n[0]:void 0);let a=i=>{let l=i.target;h(l,e.current)?b=e:q(l)||(b=null)};return o.addEventListener("focusin",a,!1),n==null||n.forEach(i=>i.addEventListener("focusin",a,!1)),()=>{o.removeEventListener("focusin",a,!1),n==null||n.forEach(i=>i.removeEventListener("focusin",a,!1))}},[e,t,r])}function se(e){let t=$.getTreeNode(b);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function be(e,t,r){const n=m.useRef(typeof document<"u"?E(e.current?e.current[0]:void 0).activeElement:null);w(()=>{let o=e.current;const a=E(o?o[0]:void 0);if(!t||r)return;let i=()=>{(!b||F(b,e))&&h(a.activeElement,e.current)&&(b=e)};return a.addEventListener("focusin",i,!1),o==null||o.forEach(l=>l.addEventListener("focusin",i,!1)),()=>{a.removeEventListener("focusin",i,!1),o==null||o.forEach(l=>l.removeEventListener("focusin",i,!1))}},[e,r]),w(()=>{const o=E(e.current?e.current[0]:void 0);if(!t)return;let a=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey||!S(e)||i.isComposing)return;let l=o.activeElement;if(!h(l,e.current))return;let d=$.getTreeNode(e);if(!d)return;let c=d.nodeToRestore,u=g(o.body,{tabbable:!0});u.currentNode=l;let f=i.shiftKey?u.previousNode():u.nextNode();if((!c||!o.body.contains(c)||c===o.body)&&(c=void 0,d.nodeToRestore=void 0),(!f||!h(f,e.current))&&c){u.currentNode=c;do f=i.shiftKey?u.previousNode():u.nextNode();while(h(f,e.current));i.preventDefault(),i.stopPropagation(),f?N(f,!0):q(c)?N(c,!0):l.blur()}};return r||o.addEventListener("keydown",a,!0),()=>{r||o.removeEventListener("keydown",a,!0)}},[e,t,r]),w(()=>{const o=E(e.current?e.current[0]:void 0);if(!t)return;let a=$.getTreeNode(e);if(a){var i;return a.nodeToRestore=(i=n.current)!==null&&i!==void 0?i:void 0,()=>{let l=$.getTreeNode(e);if(!l)return;let d=l.nodeToRestore;if(t&&d&&(h(o.activeElement,e.current)||o.activeElement===o.body&&se(e))){let c=$.clone();requestAnimationFrame(()=>{if(o.activeElement===o.body){let u=c.getTreeNode(e);for(;u;){if(u.nodeToRestore&&u.nodeToRestore.isConnected){H(u.nodeToRestore);return}u=u.parent}for(u=c.getTreeNode(e);u;){if(u.scopeRef&&u.scopeRef.current&&$.getTreeNode(u.scopeRef)){let f=J(u.scopeRef.current,!0);H(f);return}u=u.parent}}})}}}},[e,t])}function H(e){e.dispatchEvent(new CustomEvent(D,{bubbles:!0,cancelable:!0}))&&N(e)}function g(e,t,r){let n=t!=null&&t.tabbable?ce:ie,o=E(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var i;return!(t==null||(i=t.from)===null||i===void 0)&&i.contains(a)?NodeFilter.FILTER_REJECT:a.matches(n)&&X(a)&&(!r||h(a,r))&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(o.currentNode=t.from),o}function Re(e,t={}){return{focusNext(r={}){let n=e.current;if(!n)return null;let{from:o,tabbable:a=t.tabbable,wrap:i=t.wrap,accept:l=t.accept}=r,d=o||E(n).activeElement,c=g(n,{tabbable:a,accept:l});n.contains(d)&&(c.currentNode=d);let u=c.nextNode();return!u&&i&&(c.currentNode=n,u=c.nextNode()),u&&N(u,!0),u},focusPrevious(r=t){let n=e.current;if(!n)return null;let{from:o,tabbable:a=t.tabbable,wrap:i=t.wrap,accept:l=t.accept}=r,d=o||E(n).activeElement,c=g(n,{tabbable:a,accept:l});if(n.contains(d))c.currentNode=d;else{let f=P(c);return f&&N(f,!0),f??null}let u=c.previousNode();if(!u&&i){c.currentNode=n;let f=P(c);if(!f)return null;u=f}return u&&N(u,!0),u??null},focusFirst(r=t){let n=e.current;if(!n)return null;let{tabbable:o=t.tabbable,accept:a=t.accept}=r,l=g(n,{tabbable:o,accept:a}).nextNode();return l&&N(l,!0),l},focusLast(r=t){let n=e.current;if(!n)return null;let{tabbable:o=t.tabbable,accept:a=t.accept}=r,i=g(n,{tabbable:o,accept:a}),l=P(i);return l&&N(l,!0),l??null}}}function P(e){let t,r;do r=e.lastChild(),r&&(t=r);while(r);return t}class W{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,r,n){let o=this.fastMap.get(r??null);if(!o)return;let a=new K({scopeRef:t});o.addChild(a),a.parent=o,this.fastMap.set(t,a),n&&(a.nodeToRestore=n)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let r=this.fastMap.get(t);if(!r)return;let n=r.parent;for(let a of this.traverse())a!==r&&r.nodeToRestore&&a.nodeToRestore&&r.scopeRef&&r.scopeRef.current&&h(a.nodeToRestore,r.scopeRef.current)&&(a.nodeToRestore=r.nodeToRestore);let o=r.children;n&&(n.removeChild(r),o.size>0&&o.forEach(a=>n&&n.addChild(a))),this.fastMap.delete(r.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let r of t.children)yield*this.traverse(r)}clone(){var t;let r=new W;var n;for(let o of this.traverse())r.addTreeNode(o.scopeRef,(n=(t=o.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&n!==void 0?n:null,o.nodeToRestore);return r}constructor(){this.fastMap=new Map,this.root=new K({scopeRef:null}),this.fastMap.set(null,this.root)}}class K{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let $=new W;const ve=Symbol.for("react-aria.i18n.locale"),$e=Symbol.for("react-aria.i18n.strings");let x;class R{getStringForLocale(t,r){let o=this.getStringsForLocale(r)[t];if(!o)throw new Error(`Could not find intl message ${t} in ${r} locale`);return o}getStringsForLocale(t){let r=this.strings[t];return r||(r=pe(t,this.strings,this.defaultLocale),this.strings[t]=r),r}static getGlobalDictionaryForPackage(t){if(typeof window>"u")return null;let r=window[ve];if(x===void 0){let o=window[$e];if(!o)return null;x={};for(let a in o)x[a]=new R({[r]:o[a]},r)}let n=x==null?void 0:x[t];if(!n)throw new Error(`Strings for package "${t}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return n}constructor(t,r="en-US"){this.strings=Object.fromEntries(Object.entries(t).filter(([,n])=>n)),this.defaultLocale=r}}function pe(e,t,r="en-US"){if(t[e])return t[e];let n=he(e);if(t[n])return t[n];for(let o in t)if(o.startsWith(n+"-"))return t[o];return t[r]}function he(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const _=new Map,U=new Map;class me{format(t,r){let n=this.strings.getStringForLocale(t,this.locale);return typeof n=="function"?n(r,this):n}plural(t,r,n="cardinal"){let o=r["="+t];if(o)return typeof o=="function"?o():o;let a=this.locale+":"+n,i=_.get(a);i||(i=new Intl.PluralRules(this.locale,{type:n}),_.set(a,i));let l=i.select(t);return o=r[l]||r.other,typeof o=="function"?o():o}number(t){let r=U.get(this.locale);return r||(r=new Intl.NumberFormat(this.locale),U.set(this.locale,r)),r.format(t)}select(t,r){let n=t[r]||t.other;return typeof n=="function"?n():n}constructor(t,r){this.locale=t,this.strings=r}}const Y=new WeakMap;function Ne(e){let t=Y.get(e);return t||(t=new R(e),Y.set(e,t)),t}function Ee(e,t){return t&&R.getGlobalDictionaryForPackage(t)||Ne(e)}function ke(e,t){let{locale:r}=G(),n=Ee(e,t);return m.useMemo(()=>new me(r,n),[r,n])}let A=new Map;function Me(e){let{locale:t}=G(),r=t+(e?Object.entries(e).sort((o,a)=>o[0]<a[0]?-1:1).join():"");if(A.has(r))return A.get(r);let n=new Intl.Collator(t,e);return A.set(r,n),n}export{ye as $,ee as a,Me as b,Ce as c,xe as d,Fe as e,ke as f,Se as g,ne as h,Le as i,g as j,Re as k,Ee as l,R as m,me as n};
