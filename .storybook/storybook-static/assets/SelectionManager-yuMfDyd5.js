import{d as Mt,e as It,f as ce,$ as Tt,g as X,h as Rt,i as Q,j as Lt,a as _,b as kt}from"./useCollator-DHdgfgeP.js";import{r as y,R as H}from"./index-CTjT7uj6.js";import{$ as Ot}from"./useFocusWithin-C7oArVkD.js";import{f as ee,i as zt,b as Y,a as de,y as Ut,m as jt,j as q,o as te,s as se}from"./focusSafely-ByiDPXQJ.js";import{d as Vt,a as Ht}from"./useOverlayTriggerState-B1dSu2Ro.js";import{f as Wt,$ as fe,b as pe,g as Nt}from"./usePress-nudZ2Xgz.js";import{r as Gt}from"./index-9r8iugjR.js";import{$ as qt}from"./context-AGV5_Mtb.js";import{$ as Zt}from"./useControlledState-CEg4Rl-x.js";function Yt(l){let{ref:e,onInteractOutside:t,isDisabled:s,onInteractOutsideStart:i}=l,r=y.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),u=ee(o=>{t&&V(o,e)&&(i&&i(o),r.current.isPointerDown=!0)}),d=ee(o=>{t&&t(o)});y.useEffect(()=>{let o=r.current;if(s)return;const $=e.current,h=zt($);if(typeof PointerEvent<"u"){let b=f=>{o.isPointerDown&&V(f,e)&&d(f),o.isPointerDown=!1};return h.addEventListener("pointerdown",u,!0),h.addEventListener("pointerup",b,!0),()=>{h.removeEventListener("pointerdown",u,!0),h.removeEventListener("pointerup",b,!0)}}else{let b=c=>{o.ignoreEmulatedMouseEvents?o.ignoreEmulatedMouseEvents=!1:o.isPointerDown&&V(c,e)&&d(c),o.isPointerDown=!1},f=c=>{o.ignoreEmulatedMouseEvents=!0,o.isPointerDown&&V(c,e)&&d(c),o.isPointerDown=!1};return h.addEventListener("mousedown",u,!0),h.addEventListener("mouseup",b,!0),h.addEventListener("touchstart",u,!0),h.addEventListener("touchend",f,!0),()=>{h.removeEventListener("mousedown",u,!0),h.removeEventListener("mouseup",b,!0),h.removeEventListener("touchstart",u,!0),h.removeEventListener("touchend",f,!0)}}},[e,s,u,d])}function V(l,e){if(l.button>0)return!1;if(l.target){const t=l.target.ownerDocument;if(!t||!t.documentElement.contains(l.target)||l.target.closest("[data-react-aria-top-layer]"))return!1}return e.current&&!e.current.contains(l.target)}const Jt=500;function he(l){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:s,onLongPress:i,threshold:r=Jt,accessibilityDescription:u}=l;const d=y.useRef(void 0);let{addGlobalListener:o,removeGlobalListener:$}=Wt(),{pressProps:h}=fe({isDisabled:e,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(t&&t({...f,type:"longpressstart"}),d.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),i&&i({...f,type:"longpress"}),d.current=void 0},r),f.pointerType==="touch")){let c=g=>{g.preventDefault()};o(f.target,"contextmenu",c,{once:!0}),o(window,"pointerup",()=>{setTimeout(()=>{$(f.target,"contextmenu",c)},30)},{once:!0})}},onPressEnd(f){d.current&&clearTimeout(d.current),s&&(f.pointerType==="mouse"||f.pointerType==="touch")&&s({...f,type:"longpressend"})}}),b=Mt(i&&!e?u:void 0);return{longPressProps:Y(h,b)}}const I=[];function vs(l,e){let{onClose:t,shouldCloseOnBlur:s,isOpen:i,isDismissable:r=!1,isKeyboardDismissDisabled:u=!1,shouldCloseOnInteractOutside:d}=l;y.useEffect(()=>(i&&I.push(e),()=>{let g=I.indexOf(e);g>=0&&I.splice(g,1)}),[i,e]);let o=()=>{I[I.length-1]===e&&t&&t()},$=g=>{(!d||d(g.target))&&I[I.length-1]===e&&(g.stopPropagation(),g.preventDefault())},h=g=>{(!d||d(g.target))&&(I[I.length-1]===e&&(g.stopPropagation(),g.preventDefault()),o())},b=g=>{g.key==="Escape"&&!u&&!g.nativeEvent.isComposing&&(g.stopPropagation(),g.preventDefault(),o())};Yt({ref:e,onInteractOutside:r&&i?h:null,onInteractOutsideStart:$});let{focusWithinProps:f}=Ot({isDisabled:!s,onBlurWithin:g=>{!g.relatedTarget||It(g.relatedTarget)||(!d||d(g.relatedTarget))&&t()}}),c=g=>{g.target===g.currentTarget&&g.preventDefault()};return{overlayProps:{onKeyDown:b,...f},underlayProps:{onPointerDown:c}}}function Xt(l,e,t){let{type:s}=l,{isOpen:i}=e;y.useEffect(()=>{t&&t.current&&Vt.set(t.current,e.close)});let r;s==="menu"?r=!0:s==="listbox"&&(r="listbox");let u=de();return{triggerProps:{"aria-haspopup":r,"aria-expanded":i,"aria-controls":i?u:null,onPress:e.toggle},overlayProps:{id:u}}}var ge={};ge={dismiss:"تجاهل"};var ye={};ye={dismiss:"Отхвърляне"};var $e={};$e={dismiss:"Odstranit"};var be={};be={dismiss:"Luk"};var ve={};ve={dismiss:"Schließen"};var me={};me={dismiss:"Απόρριψη"};var xe={};xe={dismiss:"Dismiss"};var Ke={};Ke={dismiss:"Descartar"};var De={};De={dismiss:"Lõpeta"};var Se={};Se={dismiss:"Hylkää"};var Pe={};Pe={dismiss:"Rejeter"};var we={};we={dismiss:"התעלם"};var Ee={};Ee={dismiss:"Odbaci"};var Ae={};Ae={dismiss:"Elutasítás"};var Be={};Be={dismiss:"Ignora"};var Ce={};Ce={dismiss:"閉じる"};var Fe={};Fe={dismiss:"무시"};var Me={};Me={dismiss:"Atmesti"};var Ie={};Ie={dismiss:"Nerādīt"};var Te={};Te={dismiss:"Lukk"};var Re={};Re={dismiss:"Negeren"};var Le={};Le={dismiss:"Zignoruj"};var ke={};ke={dismiss:"Descartar"};var Oe={};Oe={dismiss:"Dispensar"};var ze={};ze={dismiss:"Revocare"};var Ue={};Ue={dismiss:"Пропустить"};var je={};je={dismiss:"Zrušiť"};var Ve={};Ve={dismiss:"Opusti"};var He={};He={dismiss:"Odbaci"};var We={};We={dismiss:"Avvisa"};var Ne={};Ne={dismiss:"Kapat"};var Ge={};Ge={dismiss:"Скасувати"};var qe={};qe={dismiss:"取消"};var Ze={};Ze={dismiss:"關閉"};var Ye={};Ye={"ar-AE":ge,"bg-BG":ye,"cs-CZ":$e,"da-DK":be,"de-DE":ve,"el-GR":me,"en-US":xe,"es-ES":Ke,"et-EE":De,"fi-FI":Se,"fr-FR":Pe,"he-IL":we,"hr-HR":Ee,"hu-HU":Ae,"it-IT":Be,"ja-JP":Ce,"ko-KR":Fe,"lt-LT":Me,"lv-LV":Ie,"nb-NO":Te,"nl-NL":Re,"pl-PL":Le,"pt-BR":ke,"pt-PT":Oe,"ro-RO":ze,"ru-RU":Ue,"sk-SK":je,"sl-SI":Ve,"sr-SP":He,"sv-SE":We,"tr-TR":Ne,"uk-UA":Ge,"zh-CN":qe,"zh-TW":Ze};function Qt(l){return l&&l.__esModule?l.default:l}function ms(l){let{onDismiss:e,...t}=l,s=ce(Qt(Ye),"@react-aria/overlays"),i=Tt(t,s.format("dismiss")),r=()=>{e&&e()};return H.createElement(Ht,null,H.createElement("button",{...i,tabIndex:-1,onClick:r,style:{width:1,height:1}}))}function Z(l){return Ut()?l.altKey:l.ctrlKey}function z(l){return jt()?l.metaKey:l.ctrlKey}const _t=1e3;function es(l){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:s}=l,i=y.useRef({search:"",timeout:null}).current,r=u=>{let d=ts(u.key);if(!d||u.ctrlKey||u.metaKey||!u.currentTarget.contains(u.target))return;d===" "&&i.search.trim().length>0&&(u.preventDefault(),"continuePropagation"in u||u.stopPropagation()),i.search+=d;let o=e.getKeyForSearch(i.search,t.focusedKey);o==null&&(o=e.getKeyForSearch(i.search)),o!=null&&(t.setFocusedKey(o),s&&s(o)),clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},_t)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?r:null}}}function ts(l){return l.length===1||!/^[A-Z]/i.test(l)?l:""}function ss(l){let{selectionManager:e,keyboardDelegate:t,ref:s,autoFocus:i=!1,shouldFocusWrap:r=!1,disallowEmptySelection:u=!1,disallowSelectAll:d=!1,selectOnFocus:o=e.selectionBehavior==="replace",disallowTypeAhead:$=!1,shouldUseVirtualFocus:h,allowsTabNavigation:b=!1,isVirtualized:f,scrollRef:c=s,linkBehavior:g="action"}=l,{direction:S}=qt(),v=pe(),E=n=>{if(n.altKey&&n.key==="Tab"&&n.preventDefault(),!s.current.contains(n.target))return;const m=(p,k)=>{if(p!=null){if(e.isLink(p)&&g==="selection"&&o&&!Z(n)){Gt.flushSync(()=>{e.setFocusedKey(p,k)});let O=c.current.querySelector(`[data-key="${CSS.escape(p.toString())}"]`),J=e.getItemProps(p);v.open(O,n,J.href,J.routerOptions);return}if(e.setFocusedKey(p,k),e.isLink(p)&&g==="override")return;n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(p):o&&!Z(n)&&e.replaceSelection(p)}};switch(n.key){case"ArrowDown":if(t.getKeyBelow){var P,D;n.preventDefault();let p=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(P=t.getFirstKey)===null||P===void 0?void 0:P.call(t);p==null&&r&&(p=(D=t.getFirstKey)===null||D===void 0?void 0:D.call(t,e.focusedKey)),m(p)}break;case"ArrowUp":if(t.getKeyAbove){var C,F;n.preventDefault();let p=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(C=t.getLastKey)===null||C===void 0?void 0:C.call(t);p==null&&r&&(p=(F=t.getLastKey)===null||F===void 0?void 0:F.call(t,e.focusedKey)),m(p)}break;case"ArrowLeft":if(t.getKeyLeftOf){var U,a;n.preventDefault();let p=t.getKeyLeftOf(e.focusedKey);p==null&&r&&(p=S==="rtl"?(U=t.getFirstKey)===null||U===void 0?void 0:U.call(t,e.focusedKey):(a=t.getLastKey)===null||a===void 0?void 0:a.call(t,e.focusedKey)),m(p,S==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var M,W;n.preventDefault();let p=t.getKeyRightOf(e.focusedKey);p==null&&r&&(p=S==="rtl"?(M=t.getLastKey)===null||M===void 0?void 0:M.call(t,e.focusedKey):(W=t.getFirstKey)===null||W===void 0?void 0:W.call(t,e.focusedKey)),m(p,S==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){n.preventDefault();let p=t.getFirstKey(e.focusedKey,z(n));e.setFocusedKey(p),z(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(p):o&&e.replaceSelection(p)}break;case"End":if(t.getLastKey){n.preventDefault();let p=t.getLastKey(e.focusedKey,z(n));e.setFocusedKey(p),z(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(p):o&&e.replaceSelection(p)}break;case"PageDown":if(t.getKeyPageBelow){n.preventDefault();let p=t.getKeyPageBelow(e.focusedKey);m(p)}break;case"PageUp":if(t.getKeyPageAbove){n.preventDefault();let p=t.getKeyPageAbove(e.focusedKey);m(p)}break;case"a":z(n)&&e.selectionMode==="multiple"&&d!==!0&&(n.preventDefault(),e.selectAll());break;case"Escape":!u&&e.selectedKeys.size!==0&&(n.stopPropagation(),n.preventDefault(),e.clearSelection());break;case"Tab":if(!b){if(n.shiftKey)s.current.focus();else{let p=Lt(s.current,{tabbable:!0}),k,O;do O=p.lastChild(),O&&(k=O);while(O);k&&!k.contains(document.activeElement)&&se(k)}break}}},x=y.useRef({top:0,left:0});X(c,"scroll",f?null:()=>{x.current={top:c.current.scrollTop,left:c.current.scrollLeft}});let K=n=>{if(e.isFocused){n.currentTarget.contains(n.target)||e.setFocused(!1);return}if(n.currentTarget.contains(n.target)){if(e.setFocused(!0),e.focusedKey==null){let D=F=>{F!=null&&(e.setFocusedKey(F),o&&e.replaceSelection(F))},C=n.relatedTarget;var m,P;C&&n.currentTarget.compareDocumentPosition(C)&Node.DOCUMENT_POSITION_FOLLOWING?D((m=e.lastSelectedKey)!==null&&m!==void 0?m:t.getLastKey()):D((P=e.firstSelectedKey)!==null&&P!==void 0?P:t.getFirstKey())}else f||(c.current.scrollTop=x.current.top,c.current.scrollLeft=x.current.left);if(e.focusedKey!=null){let D=c.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);D&&(D.contains(document.activeElement)||se(D),te()==="keyboard"&&Q(D,{containingElement:s.current}))}}},A=n=>{n.currentTarget.contains(n.relatedTarget)||e.setFocused(!1)};const B=y.useRef(i);y.useEffect(()=>{if(B.current){let n=null;i==="first"&&(n=t.getFirstKey()),i==="last"&&(n=t.getLastKey());let m=e.selectedKeys;if(m.size){for(let P of m)if(e.canSelectItem(P)){n=P;break}}e.setFocused(!0),e.setFocusedKey(n),n==null&&!h&&q(s.current)}},[]);let T=y.useRef(e.focusedKey);y.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==T.current||B.current)&&(c!=null&&c.current)){let n=te(),m=s.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);if(!m)return;(n==="keyboard"||B.current)&&(Rt(c.current,m),n!=="virtual"&&Q(m,{containingElement:s.current}))}e.isFocused&&e.focusedKey==null&&T.current!=null&&q(s.current),T.current=e.focusedKey,B.current=!1}),X(s,"react-aria-focus-scope-restore",n=>{n.preventDefault(),e.setFocused(!0)});let R={onKeyDown:E,onFocus:K,onBlur:A,onMouseDown(n){c.current===n.target&&n.preventDefault()}},{typeSelectProps:j}=es({keyboardDelegate:t,selectionManager:e});$||(R=Y(j,R));let L;return h||(L=e.focusedKey==null?0:-1),{collectionProps:{...R,tabIndex:L}}}function xs(l){let{selectionManager:e,key:t,ref:s,shouldSelectOnPressUp:i,shouldUseVirtualFocus:r,focus:u,isDisabled:d,onAction:o,allowsDifferentPressOrigin:$,linkBehavior:h="action"}=l,b=pe(),f=a=>{if(a.pointerType==="keyboard"&&Z(a))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(h==="selection"){let M=e.getItemProps(t);b.open(s.current,a,M.href,M.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(h==="override"||h==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):a&&a.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||a&&(z(a)||a.pointerType==="touch"||a.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};y.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!r&&(u?u():document.activeElement!==s.current&&q(s.current))},[s,t,e.focusedKey,e.childFocusStrategy,e.isFocused,r]),d=d||e.isDisabled(t);let c={};!r&&!d?c={tabIndex:t===e.focusedKey?0:-1,onFocus(a){a.target===s.current&&e.setFocusedKey(t)}}:d&&(c.onMouseDown=a=>{a.preventDefault()});let g=e.isLink(t)&&h==="override",S=e.isLink(t)&&h!=="selection"&&h!=="none",v=!d&&e.canSelectItem(t)&&!g,E=(o||S)&&!d,x=E&&(e.selectionBehavior==="replace"?!v:!v||e.isEmpty),K=E&&v&&e.selectionBehavior==="replace",A=x||K,B=y.useRef(null),T=A&&v,R=y.useRef(!1),j=y.useRef(!1),L=a=>{if(o&&o(),S){let M=e.getItemProps(t);b.open(s.current,a,M.href,M.routerOptions)}},n={};i?(n.onPressStart=a=>{B.current=a.pointerType,R.current=T,a.pointerType==="keyboard"&&(!A||le())&&f(a)},$?(n.onPressUp=x?null:a=>{a.pointerType!=="keyboard"&&v&&f(a)},n.onPress=x?L:null):n.onPress=a=>{if(x||K&&a.pointerType!=="mouse"){if(a.pointerType==="keyboard"&&!ie())return;L(a)}else a.pointerType!=="keyboard"&&v&&f(a)}):(n.onPressStart=a=>{B.current=a.pointerType,R.current=T,j.current=x,v&&(a.pointerType==="mouse"&&!x||a.pointerType==="keyboard"&&(!E||le()))&&f(a)},n.onPress=a=>{(a.pointerType==="touch"||a.pointerType==="pen"||a.pointerType==="virtual"||a.pointerType==="keyboard"&&A&&ie()||a.pointerType==="mouse"&&j.current)&&(A?L(a):v&&f(a))}),c["data-key"]=t,n.preventFocusOnPress=r;let{pressProps:m,isPressed:P}=fe(n),D=K?a=>{B.current==="mouse"&&(a.stopPropagation(),a.preventDefault(),L(a))}:void 0,{longPressProps:C}=he({isDisabled:!T,onLongPress(a){a.pointerType==="touch"&&(f(a),e.setSelectionBehavior("toggle"))}}),F=a=>{B.current==="touch"&&R.current&&a.preventDefault()},U=e.isLink(t)?a=>{Nt.isOpening||a.preventDefault()}:void 0;return{itemProps:Y(c,v||x?m:{},T?C:{},{onDoubleClick:D,onDragStartCapture:F,onClick:U}),isPressed:P,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:d,allowsSelection:v,hasAction:A}}function ie(){let l=window.event;return(l==null?void 0:l.key)==="Enter"}function le(){let l=window.event;return(l==null?void 0:l.key)===" "||(l==null?void 0:l.code)==="Space"}class re{getItemRect(e){let t=this.ref.current,s=e!=null?t.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null;if(!s)return null;let i=t.getBoundingClientRect(),r=s.getBoundingClientRect();return{x:r.left-i.left+t.scrollLeft,y:r.top-i.top+t.scrollTop,width:r.width,height:r.height}}getContentSize(){let e=this.ref.current;return{width:e.scrollWidth,height:e.scrollHeight}}getVisibleRect(){let e=this.ref.current;return{x:e.scrollLeft,y:e.scrollTop,width:e.offsetWidth,height:e.offsetHeight}}constructor(e){this.ref=e}}class is{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,t,s){let i=this.layoutDelegate.getItemRect(e);if(!i)return null;let r=i;do e=t(e),i=this.layoutDelegate.getItemRect(e);while(i&&s(r,i));return e}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){let t=this.collection.getItem(e);if((t==null?void 0:t.type)==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}getKeyPageAbove(e){let t=this.ref.current,s=this.layoutDelegate.getItemRect(e);if(!s)return null;if(!_(t))return this.getFirstKey();if(this.orientation==="horizontal"){let i=Math.max(0,s.x+s.width-this.layoutDelegate.getVisibleRect().width);for(;s&&s.x>i;)e=this.getKeyAbove(e),s=e==null?null:this.layoutDelegate.getItemRect(e)}else{let i=Math.max(0,s.y+s.height-this.layoutDelegate.getVisibleRect().height);for(;s&&s.y>i;)e=this.getKeyAbove(e),s=e==null?null:this.layoutDelegate.getItemRect(e)}return e??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,s=this.layoutDelegate.getItemRect(e);if(!s)return null;if(!_(t))return this.getLastKey();if(this.orientation==="horizontal"){let i=Math.min(this.layoutDelegate.getContentSize().width,s.y-s.width+this.layoutDelegate.getVisibleRect().width);for(;s&&s.x<i;)e=this.getKeyBelow(e),s=e==null?null:this.layoutDelegate.getItemRect(e)}else{let i=Math.min(this.layoutDelegate.getContentSize().height,s.y-s.height+this.layoutDelegate.getVisibleRect().height);for(;s&&s.y<i;)e=this.getKeyBelow(e),s=e==null?null:this.layoutDelegate.getItemRect(e)}return e??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let s=this.collection,i=t||this.getFirstKey();for(;i!=null;){let r=s.getItem(i),u=r.textValue.slice(0,e.length);if(r.textValue&&this.collator.compare(u,e)===0)return i;i=this.getKeyBelow(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new re(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new re(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function Ks(l){let{selectionManager:e,collection:t,disabledKeys:s,ref:i,keyboardDelegate:r,layoutDelegate:u}=l,d=kt({usage:"search",sensitivity:"base"}),o=e.disabledBehavior,$=y.useMemo(()=>r||new is({collection:t,disabledKeys:s,disabledBehavior:o,ref:i,collator:d,layoutDelegate:u}),[r,u,t,s,i,d,o]),{collectionProps:h}=ss({...l,ref:i,selectionManager:e,keyboardDelegate:$});return{listProps:h}}class ls{build(e,t){return this.context=t,oe(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:s}=e;if(typeof t=="function"){if(!s)throw new Error("props.children was a function but props.items is missing");for(let i of e.items)yield*this.getFullNode({value:i},{renderer:t})}else{let i=[];H.Children.forEach(t,u=>{i.push(u)});let r=0;for(let u of i){let d=this.getFullNode({element:u,index:r},{});for(let o of d)r++,yield o}}}getKey(e,t,s,i){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${i}${t.key}`;let r=t.value;if(r!=null){var u;let d=(u=r.key)!==null&&u!==void 0?u:r.id;if(d==null)throw new Error("No key found for item");return d}return i?`${i}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,s,i){let r=e.element;if(!r&&e.value&&t&&t.renderer){let o=this.cache.get(e.value);if(o&&(!o.shouldInvalidate||!o.shouldInvalidate(this.context))){o.index=e.index,o.parentKey=i?i.key:null,yield o;return}r=t.renderer(e.value)}if(H.isValidElement(r)){let o=r.type;if(typeof o!="function"&&typeof o.getCollectionNode!="function"){let f=typeof r.type=="function"?r.type.name:r.type;throw new Error(`Unknown element <${f}> in collection.`)}let $=o.getCollectionNode(r.props,this.context),h=e.index,b=$.next();for(;!b.done&&b.value;){let f=b.value;e.index=h;let c=f.key;c||(c=f.element?null:this.getKey(r,e,t,s));let S=[...this.getFullNode({...f,key:c,index:h,wrapper:rs(e.wrapper,f.wrapper)},this.getChildState(t,f),s?`${s}${r.key}`:r.key,i)];for(let v of S){if(v.value=f.value||e.value,v.value&&this.cache.set(v.value,v),e.type&&v.type!==e.type)throw new Error(`Unsupported type <${N(v.type)}> in <${N(i.type)}>. Only <${N(e.type)}> is supported.`);h++,yield v}b=$.next(S)}return}if(e.key==null)return;let u=this,d={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:e.value,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:oe(function*(){if(!e.hasChildNodes)return;let o=0;for(let $ of e.childNodes()){$.key!=null&&($.key=`${d.key}${$.key}`),$.index=o;let h=u.getFullNode($,u.getChildState(t,$),d.key,d);for(let b of h)o++,yield b}})};yield d}constructor(){this.cache=new WeakMap}}function oe(l){let e=[],t=null;return{*[Symbol.iterator](){for(let s of e)yield s;t||(t=l());for(let s of t)e.push(s),yield s}}}function rs(l,e){if(l&&e)return t=>l(e(t));if(l)return l;if(e)return e}function N(l){return l[0].toUpperCase()+l.slice(1)}function Ds(l,e,t){let s=y.useMemo(()=>new ls,[]),{children:i,items:r,collection:u}=l;return y.useMemo(()=>{if(u)return u;let o=s.build({children:i,items:r},t);return e(o)},[s,i,r,u,t,e])}function Je(l,e){return typeof e.getChildren=="function"?e.getChildren(l.key):l.childNodes}function os(l){return ns(l)}function ns(l,e){for(let t of l)return t}function G(l,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let s=[...ne(l,e),e],i=[...ne(l,t),t],r=s.slice(0,i.length).findIndex((u,d)=>u!==i[d]);return r!==-1?(e=s[r],t=i[r],e.index-t.index):s.findIndex(u=>u===t)>=0?1:(i.findIndex(u=>u===e)>=0,-1)}function ne(l,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=l.getItem(e.parentKey),t.unshift(e);return t}const ue=new WeakMap;function Ss(l){let e=ue.get(l);if(e!=null)return e;e=0;let t=s=>{for(let i of s)i.type==="section"?t(Je(i,l)):e++};return t(l),ue.set(l,e),e}var Xe={};Xe={longPressMessage:"اضغط مطولاً أو اضغط على Alt + السهم لأسفل لفتح القائمة"};var Qe={};Qe={longPressMessage:"Натиснете продължително или натиснете Alt+ стрелка надолу, за да отворите менюто"};var _e={};_e={longPressMessage:"Dlouhým stiskem nebo stisknutím kláves Alt + šipka dolů otevřete nabídku"};var et={};et={longPressMessage:"Langt tryk eller tryk på Alt + pil ned for at åbne menuen"};var tt={};tt={longPressMessage:"Drücken Sie lange oder drücken Sie Alt + Nach-unten, um das Menü zu öffnen"};var st={};st={longPressMessage:"Πιέστε παρατεταμένα ή πατήστε Alt + κάτω βέλος για να ανοίξετε το μενού"};var it={};it={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var lt={};lt={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el menú"};var rt={};rt={longPressMessage:"Menüü avamiseks vajutage pikalt või vajutage klahve Alt + allanool"};var ot={};ot={longPressMessage:"Avaa valikko painamalla pohjassa tai näppäinyhdistelmällä Alt + Alanuoli"};var nt={};nt={longPressMessage:"Appuyez de manière prolongée ou appuyez sur Alt + Flèche vers le bas pour ouvrir le menu."};var ut={};ut={longPressMessage:"לחץ לחיצה ארוכה או הקש Alt + ArrowDown כדי לפתוח את התפריט"};var at={};at={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var ct={};ct={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyíl gombot a menü megnyitásához"};var dt={};dt={longPressMessage:"Premere a lungo o premere Alt + Freccia giù per aprire il menu"};var ft={};ft={longPressMessage:"長押しまたは Alt+下矢印キーでメニューを開く"};var pt={};pt={longPressMessage:"길게 누르거나 Alt + 아래쪽 화살표를 눌러 메뉴 열기"};var ht={};ht={longPressMessage:"Norėdami atidaryti meniu, nuspaudę palaikykite arba paspauskite „Alt + ArrowDown“."};var gt={};gt={longPressMessage:"Lai atvērtu izvēlni, turiet nospiestu vai nospiediet taustiņu kombināciju Alt + lejupvērstā bultiņa"};var yt={};yt={longPressMessage:"Langt trykk eller trykk Alt + PilNed for å åpne menyen"};var $t={};$t={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var bt={};bt={longPressMessage:"Naciśnij i przytrzymaj lub naciśnij klawisze Alt + Strzałka w dół, aby otworzyć menu"};var vt={};vt={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var mt={};mt={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var xt={};xt={longPressMessage:"Apăsați lung sau apăsați pe Alt + săgeată în jos pentru a deschide meniul"};var Kt={};Kt={longPressMessage:"Нажмите и удерживайте или нажмите Alt + Стрелка вниз, чтобы открыть меню"};var Dt={};Dt={longPressMessage:"Ponuku otvoríte dlhým stlačením alebo stlačením klávesu Alt + klávesu so šípkou nadol"};var St={};St={longPressMessage:"Za odprtje menija pritisnite in držite gumb ali pritisnite Alt+puščica navzdol"};var Pt={};Pt={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var wt={};wt={longPressMessage:"Håll nedtryckt eller tryck på Alt + pil nedåt för att öppna menyn"};var Et={};Et={longPressMessage:"Menüyü açmak için uzun basın veya Alt + Aşağı Ok tuşuna basın"};var At={};At={longPressMessage:"Довго або звичайно натисніть комбінацію клавіш Alt і стрілка вниз, щоб відкрити меню"};var Bt={};Bt={longPressMessage:"长按或按 Alt + 向下方向键以打开菜单"};var Ct={};Ct={longPressMessage:"長按或按 Alt+向下鍵以開啟功能表"};var Ft={};Ft={"ar-AE":Xe,"bg-BG":Qe,"cs-CZ":_e,"da-DK":et,"de-DE":tt,"el-GR":st,"en-US":it,"es-ES":lt,"et-EE":rt,"fi-FI":ot,"fr-FR":nt,"he-IL":ut,"hr-HR":at,"hu-HU":ct,"it-IT":dt,"ja-JP":ft,"ko-KR":pt,"lt-LT":ht,"lv-LV":gt,"nb-NO":yt,"nl-NL":$t,"pl-PL":bt,"pt-BR":vt,"pt-PT":mt,"ro-RO":xt,"ru-RU":Kt,"sk-SK":Dt,"sl-SI":St,"sr-SP":Pt,"sv-SE":wt,"tr-TR":Et,"uk-UA":At,"zh-CN":Bt,"zh-TW":Ct};function us(l){return l&&l.__esModule?l.default:l}function Ps(l,e,t){let{type:s="menu",isDisabled:i,trigger:r="press"}=l,u=de(),{triggerProps:d,overlayProps:o}=Xt({type:s},e,t),$=c=>{if(!i&&!(r==="longPress"&&!c.altKey)&&t&&t.current)switch(c.key){case"Enter":case" ":if(r==="longPress")return;case"ArrowDown":"continuePropagation"in c||c.stopPropagation(),c.preventDefault(),e.toggle("first");break;case"ArrowUp":"continuePropagation"in c||c.stopPropagation(),c.preventDefault(),e.toggle("last");break;default:"continuePropagation"in c&&c.continuePropagation()}},h=ce(us(Ft),"@react-aria/menu"),{longPressProps:b}=he({isDisabled:i||r!=="longPress",accessibilityDescription:h.format("longPressMessage"),onLongPressStart(){e.close()},onLongPress(){e.open("first")}}),f={onPressStart(c){c.pointerType!=="touch"&&c.pointerType!=="keyboard"&&!i&&e.open(c.pointerType==="virtual"?"first":null)},onPress(c){c.pointerType==="touch"&&!i&&e.toggle()}};return delete d.onPress,{menuTriggerProps:{...d,...r==="press"?f:b,id:u,onKeyDown:$},menuProps:{...o,"aria-labelledby":u,autoFocus:e.focusStrategy||!0,onClose:e.close}}}class w extends Set{constructor(e,t,s){super(e),e instanceof w?(this.anchorKey=t||e.anchorKey,this.currentKey=s||e.currentKey):(this.anchorKey=t,this.currentKey=s)}}function as(l,e){if(l.size!==e.size)return!1;for(let t of l)if(!e.has(t))return!1;return!0}function ws(l){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:s,selectionBehavior:i="toggle",disabledBehavior:r="all"}=l,u=y.useRef(!1),[,d]=y.useState(!1),o=y.useRef(null),$=y.useRef(null),[,h]=y.useState(null),b=y.useMemo(()=>ae(l.selectedKeys),[l.selectedKeys]),f=y.useMemo(()=>ae(l.defaultSelectedKeys,new w),[l.defaultSelectedKeys]),[c,g]=Zt(b,f,l.onSelectionChange),S=y.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),[v,E]=y.useState(i);i==="replace"&&v==="toggle"&&typeof c=="object"&&c.size===0&&E("replace");let x=y.useRef(i);return y.useEffect(()=>{i!==x.current&&(E(i),x.current=i)},[i]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:v,setSelectionBehavior:E,get isFocused(){return u.current},setFocused(K){u.current=K,d(K)},get focusedKey(){return o.current},get childFocusStrategy(){return $.current},setFocusedKey(K,A="first"){o.current=K,$.current=A,h(K)},selectedKeys:c,setSelectedKeys(K){(s||!as(K,c))&&g(K)},disabledKeys:S,disabledBehavior:r}}function ae(l,e){return l?l==="all"?"all":new w(l):e}class Es{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(s=>t.has(s)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let s=this.collection.getItem(t);(!e||s&&G(this.collection,s,e)<0)&&(e=s)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let s=this.collection.getItem(t);(!e||s&&G(this.collection,s,e)>0)&&(e=s)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new w([e],e,e);else{let s=this.state.selectedKeys,i=s.anchorKey||e;t=new w(s,i,e);for(let r of this.getKeyRange(i,s.currentKey||e))t.delete(r);for(let r of this.getKeyRange(e,i))this.canSelectItem(r)&&t.add(r)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let s=this.collection.getItem(e),i=this.collection.getItem(t);return s&&i?G(this.collection,s,i)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let s=[],i=e;for(;i;){let r=this.collection.getItem(i);if((r&&r.type==="item"||r.type==="cell"&&this.allowsCellSelection)&&s.push(i),i===t)return s;i=this.collection.getKeyAfter(i)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new w(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new w([e],e,e):new w;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new w;for(let s of e)if(s=this.getKey(s),s!=null&&(t.add(s),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=s=>{for(;s!=null;){if(this.canSelectItem(s)){let i=this.collection.getItem(s);i.type==="item"&&e.push(s),i.hasChildNodes&&(this.allowsCellSelection||i.type!=="item")&&t(os(Je(i,this.collection)).key)}s=this.collection.getKeyAfter(s)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new w)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let s of e)if(!t.has(s))return!1;for(let s of t)if(!e.has(s))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let s=this.collection.getItem(e);return!(!s||!(s==null||(t=s.props)===null||t===void 0)&&t.isDisabled||s.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,s;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((s=this.collection.getItem(e))===null||s===void 0||(t=s.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,s;return!!(!((s=this.collection.getItem(e))===null||s===void 0||(t=s.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,s){this.collection=e,this.state=t;var i;this.allowsCellSelection=(i=s==null?void 0:s.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null}}export{Ks as $,Ss as a,xs as b,ws as c,Ds as d,Es as e,is as f,Ps as g,es as h,vs as i,ms as j,Yt as k};
