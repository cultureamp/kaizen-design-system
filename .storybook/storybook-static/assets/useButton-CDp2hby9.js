import{b as S,$ as V}from"./useFocusable-CuIK6Qs-.js";import{d as k,e as y,b as x}from"./focusSafely-ByiDPXQJ.js";import{$ as I}from"./useFocusWithin-C7oArVkD.js";import{r as n}from"./index-CTjT7uj6.js";import{$ as w,a as T}from"./usePress-nudZ2Xgz.js";function R(s={}){let{autoFocus:i=!1,isTextInput:t,within:e}=s,a=n.useRef({isFocused:!1,isFocusVisible:i||k()}),[u,l]=n.useState(!1),[b,f]=n.useState(()=>a.current.isFocused&&a.current.isFocusVisible),o=n.useCallback(()=>f(a.current.isFocused&&a.current.isFocusVisible),[]),d=n.useCallback(r=>{a.current.isFocused=r,l(r),o()},[o]);y(r=>{a.current.isFocusVisible=r,o()},[],{isTextInput:t});let{focusProps:c}=S({isDisabled:e,onFocusChange:d}),{focusWithinProps:p}=I({isDisabled:!e,onFocusWithinChange:d});return{isFocused:u,isFocusVisible:b,focusProps:e?p:c}}function j(s,i){let{elementType:t="button",isDisabled:e,onPress:a,onPressStart:u,onPressEnd:l,onPressUp:b,onPressChange:f,preventFocusOnPress:o,allowFocusWhenDisabled:d,onClick:c,href:p,target:r,rel:h,type:F="button"}=s,P;t==="button"?P={type:F,disabled:e}:P={role:"button",tabIndex:e?void 0:0,href:t==="a"&&e?void 0:p,target:t==="a"?r:void 0,type:t==="input"?F:void 0,disabled:t==="input"?e:void 0,"aria-disabled":!e||t==="input"?void 0:e,rel:t==="a"?h:void 0};let{pressProps:m,isPressed:C}=w({onPressStart:u,onPressEnd:l,onPressChange:f,onPress:a,onPressUp:b,isDisabled:e,preventFocusOnPress:o,ref:i}),{focusableProps:$}=V(s,i);d&&($.tabIndex=e?-1:$.tabIndex);let g=x($,m,T(s,{labelable:!0}));return{isPressed:C,buttonProps:x(P,g,{"aria-haspopup":s["aria-haspopup"],"aria-expanded":s["aria-expanded"],"aria-controls":s["aria-controls"],"aria-pressed":s["aria-pressed"],onClick:D=>{c&&(c(D),console.warn("onClick is deprecated, please use onPress"))}})}}export{j as $,R as a};
