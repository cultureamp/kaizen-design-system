import{r,R as t}from"./index-CTjT7uj6.js";import{c as I}from"./index-CCQ3W5xA.js";import{a as m}from"./hostedAssets-CVq9d3MW.js";import{L as S,P as T}from"./PauseIcon-CgJL9HNl.js";import{s as o}from"./Base-CDU6uw3M.js";import{I as q}from"./IconButton-DH93ECWt.js";const L=()=>typeof window>"u"||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?!1:document.createElement("video").canPlayType("video/webm; codecs=vp9")==="probably",M=a=>{const[i,c]=r.useState(!1);return{toggle:()=>{a.current&&(a.current.paused?(c(!1),a.current.play()):(c(!0),a.current.pause()))},icon:i?t.createElement(S,{role:"presentation"}):t.createElement(T,{role:"presentation"}),label:i?"Play animation":"Pause animation"}},A=({autoplay:a=!0,loop:i=!1,fallback:c,source:u,aspectRatio:d,onEnded:f})=>{const n=r.useRef(null),[l,h]=t.useState(!0),[w,g]=t.useState(!1),[v,E]=t.useState(!1);r.useEffect(()=>{const{current:e}=n;e!==null&&e.setAttribute("muted","")},[]),r.useEffect(()=>{const{current:e}=n;e!==null&&e.load()},[u]),r.useEffect(()=>{if(!window)return;const e=window.matchMedia("(prefers-reduced-motion: reduce)");h(e.matches);const s=()=>{const{matches:y=!1}=window.matchMedia("(prefers-reduced-motion: reduce)");h(y)},b=navigator.userAgent.match(/Edge/),P=window.matchMedia("").addEventListener===void 0;if(!(b||P))return e.addEventListener("change",s,!0),function(){e.removeEventListener("change",s)}},[]),r.useEffect(()=>{var s;const{current:e}=n;if(e){if(l)e.pause();else if(a&&!l)try{(s=e.play())==null||s.catch(()=>{})}catch{}}},[l,a]),r.useEffect(()=>{const{current:e}=n;if(!(!e||!f))return e.addEventListener("ended",f),function(){e.removeEventListener("ended",f)}},[n]),r.useEffect(()=>{window!==void 0&&E(!0)},[]),r.useEffect(()=>{v&&g(L())},[v]);const p=M(n);return t.createElement("figure",{className:I(o.figure,d&&o[d],d&&o.aspectRatioWrapper)},t.createElement("video",{muted:!0,"aria-hidden":!0,preload:"metadata",ref:n,width:"100%","data-testid":"kz-video-player",className:o.wrapper,loop:i,poster:m(`${c}.png`),autoPlay:l?!1:a,playsInline:!0,tabIndex:-1},w&&t.createElement("source",{src:m(`${u}.webm`),type:"video/webm"}),t.createElement("source",{src:m(`${u}.mp4`),type:"video/mp4"})),t.createElement(q,{onClick:()=>p.toggle(),icon:p.icon,label:p.label,classNameOverride:o.pausePlayButton}))};A.__docgenInfo={description:"",methods:[],displayName:"VideoPlayer",props:{autoplay:{required:!1,tsType:{name:"boolean"},description:`Specifies whether the animation plays as soon as it is rendered.
If the user has enabled prefer-reduced-motion their preferences
take precedent over this prop.`,defaultValue:{value:"true",computed:!1}},loop:{required:!1,tsType:{name:"boolean"},description:"Replay from start when active animation reaches the end of the animation.",defaultValue:{value:"false",computed:!1}},fallback:{required:!0,tsType:{name:"string"},description:`Fallback image. Used when rendering of the asset fails, or as a
poster for the video player.`},source:{required:!0,tsType:{name:"string"},description:`The path of the animation source, excluding the file extension. This
Player will preference Webm over mp4.`},aspectRatio:{required:!1,tsType:{name:"union",raw:'"landscape" | "portrait" | "square"',elements:[{name:"literal",value:'"landscape"'},{name:"literal",value:'"portrait"'},{name:"literal",value:'"square"'}]},description:`Aspect ratio that is set on the illustration in Scene/Spot which wraps the
component in a container, forcing the aspect ratio.`},onEnded:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{A as V};
