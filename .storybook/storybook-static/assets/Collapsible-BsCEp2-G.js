import{R as r,r as o}from"./index-CTjT7uj6.js";import{c as W}from"./index-CCQ3W5xA.js";import{H as ae}from"./Heading-Y5F8SWRW.js";import{C as oe}from"./ChevronDownIcon-prLLyjG_.js";import{C as re}from"./ChevronUpIcon-D9pr3Qd6.js";import{I as se}from"./IconButton-DH93ECWt.js";function ce(e){const n=parseFloat(e);return!isNaN(n)&&isFinite(n)}function L(e){return typeof e=="string"&&e[e.length-1]==="%"&&ce(e.substring(0,e.length-1))}function Z(e,n,p){n===0&&!p&&(e!=null&&e.style)&&(e==null?void 0:e.children.length)>0&&(e.style.display="none")}function le(e,n){n===0&&(e!=null&&e.style)&&(e.style.display="")}const de={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"};function G(e,n){return[e.static,n===0&&e.staticHeightZero,typeof n=="number"&&n>0?e.staticHeightSpecific:null,n==="auto"&&e.staticHeightAuto].filter(p=>p).join(" ")}const ue=["animateOpacity","animationStateClasses","applyInlineTransitions","children","className","contentClassName","contentRef","delay","duration","easing","height","onHeightAnimationEnd","onHeightAnimationStart","style","disableDisplayNone"],me=r.forwardRef((e,n)=>{const{animateOpacity:p=!1,animationStateClasses:A={},applyInlineTransitions:I=!0,children:S,className:T="",contentClassName:D,delay:E=0,disableDisplayNone:_=!1,duration:J=500,easing:H="ease",height:t,onHeightAnimationEnd:f,onHeightAnimationStart:g,style:u,contentRef:O}=e,y=Object.assign({},e);ue.forEach(b=>{delete y[b]});const i=o.useRef(t),s=o.useRef(null),C=o.useRef(),v=o.useRef(),l=o.useRef(Object.assign(Object.assign({},de),A)),m=typeof window<"u",$=o.useRef(m&&window.matchMedia?window.matchMedia("(prefers-reduced-motion)").matches:!1),h=$.current?0:E,X=$.current?0:J;let q=t,k="visible";typeof t=="number"?(q=t<0?0:t,k="hidden"):L(q)&&(q=t==="0%"?0:t,k="hidden");const[P,j]=o.useState(q),[Q,V]=o.useState(k),[Y,R]=o.useState(!1),[ee,B]=o.useState(G(l.current,t));o.useEffect(()=>{Z(s.current,P,_)},[]),o.useEffect(()=>{if(t!==i.current&&s.current){le(s.current,i.current),s.current.style.overflow="hidden";const b=s.current.offsetHeight;s.current.style.overflow="";const x=X+h;let d,a,U="hidden",z;const M=i.current==="auto";typeof t=="number"?(d=t<0?0:t,a=d):L(t)?(d=t==="0%"?0:t,a=d):(d=b,a="auto",U=void 0),M&&(a=d,d=b);const ne=[l.current.animating,(i.current==="auto"||t<i.current)&&l.current.animatingUp,(t==="auto"||t>i.current)&&l.current.animatingDown,a===0&&l.current.animatingToHeightZero,a==="auto"&&l.current.animatingToHeightAuto,typeof a=="number"&&a>0?l.current.animatingToHeightSpecific:null].filter(ie=>ie).join(" "),F=G(l.current,a);j(d),V("hidden"),R(!M),B(ne),clearTimeout(v.current),clearTimeout(C.current),M?(z=!0,v.current=setTimeout(()=>{j(a),V(U),R(z),g==null||g(a)},50),C.current=setTimeout(()=>{R(!1),B(F),Z(s.current,a,_),f==null||f(a)},x)):(g==null||g(d),v.current=setTimeout(()=>{j(a),V(U),R(!1),B(F),t!=="auto"&&Z(s.current,d,_),f==null||f(d)},x))}return i.current=t,()=>{clearTimeout(v.current),clearTimeout(C.current)}},[t]);const w=Object.assign(Object.assign({},u),{height:P,overflow:Q||(u==null?void 0:u.overflow)});Y&&I&&(w.transition=`height ${X}ms ${H} ${h}ms`,u!=null&&u.transition&&(w.transition=`${u.transition}, ${w.transition}`),w.WebkitTransition=w.transition);const N={};p&&(N.transition=`opacity ${X}ms ${H} ${h}ms`,N.WebkitTransition=N.transition,P===0&&(N.opacity=0));const te=typeof y["aria-hidden"]<"u"?y["aria-hidden"]:t===0;return r.createElement("div",Object.assign({},y,{"aria-hidden":te,className:`${ee} ${T}`,style:w,ref:n}),r.createElement("div",{className:D,style:N,ref:b=>{s.current=b,O&&(O.current=b)}},S))}),pe="_container_1od4r_6",fe="_header_1od4r_13",ge="_open_1od4r_27",he="_separated_1od4r_32",ye="_groupItem_1od4r_38",ve="_chevronButton_1od4r_56",be="_title_1od4r_60",_e="_defaultVariant_1od4r_64",we="_clearVariant_1od4r_68",Se="_sticky_1od4r_72",Te="_section_1od4r_78",Ee="_noPadding_1od4r_82",He="_hide_1od4r_86",c={container:pe,header:fe,open:ge,separated:he,groupItem:ye,chevronButton:ve,title:be,defaultVariant:_e,clearVariant:we,sticky:Se,section:Te,noPadding:Ee,hide:He},K=({children:e,title:n,renderHeader:p,open:A,group:I,separated:S,sticky:T,noSectionPadding:D,onToggle:E,variant:_="default",lazyLoad:J,controlled:H,classNameOverride:t,id:f,...g})=>{const[u,O]=o.useState(A??!1),y=()=>H?A:u,i=f??o.useId(),s=()=>{const h=!y();H||O(h),E==null||E(h,i)},C=h=>{h.stopPropagation(),s()},v=`${i}-button`,l=`${i}-section`,m=y(),$=!I||S;return r.createElement("div",{id:i,className:W(t,$&&c.container,I&&!S&&c.groupItem,S&&c.separated),"data-testid":`collapsible-container-${i}`,...g},r.createElement("div",{className:W(c.header,m&&c.open,T&&c.sticky,m&&_==="default"&&c.defaultVariant,m&&_==="clear"&&c.clearVariant),style:T&&{top:T.top},onClick:s,"data-testid":`collapsible-header-${i}`},p!==void 0?p(n):r.createElement("div",{className:c.title,"data-testid":`collapsible-button-title-${i}`},r.createElement(ae,{variant:"heading-4",tag:"span"},n)),r.createElement("div",null,r.createElement(se,{label:n,icon:m?r.createElement(re,{role:"presentation"}):r.createElement(oe,{role:"presentation"}),type:"button","aria-expanded":m,"aria-controls":l,"data-testid":`collapsible-button-${i}`,id:v,onClick:C,classNameOverride:c.chevronButton}))),(!J||m)&&r.createElement(me,{height:m?"auto":0,"data-testid":`collapsible-section-${i}`},r.createElement("div",{id:l,className:W(c.section,D&&c.noPadding),role:"region","aria-labelledby":v},e)))};K.displayName="Collapsible";K.__docgenInfo={description:"",methods:[],displayName:"Collapsible",props:{children:{required:!0,tsType:{name:"union",raw:"JSX.Element | JSX.Element[] | string",elements:[{name:"JSX.Element"},{name:"Array",elements:[{name:"JSX.Element"}],raw:"JSX.Element[]"},{name:"string"}]},description:""},title:{required:!0,tsType:{name:"string"},description:""},renderHeader:{required:!1,tsType:{name:"signature",type:"function",raw:"(title: string) => JSX.Element | JSX.Element[]",signature:{arguments:[{type:{name:"string"},name:"title"}],return:{name:"union",raw:"JSX.Element | JSX.Element[]",elements:[{name:"JSX.Element"},{name:"Array",elements:[{name:"JSX.Element"}],raw:"JSX.Element[]"}]}}},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},group:{required:!1,tsType:{name:"boolean"},description:""},separated:{required:!1,tsType:{name:"boolean"},description:""},sticky:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  top: string
}`,signature:{properties:[{key:"top",value:{name:"string",required:!0}}]}},description:""},noSectionPadding:{required:!1,tsType:{name:"boolean"},description:""},onToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean, id: string) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"},{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},variant:{required:!1,tsType:{name:"union",raw:'"default" | "clear"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"clear"'}]},description:`By default, the header will change background colour when open. When the variant
is set to 'clear', it will not have a background but a border-bottom will appear
to separate the heading from the content.`,defaultValue:{value:'"default"',computed:!1}},lazyLoad:{required:!1,tsType:{name:"boolean"},description:`Will avoid rendering the content until required (especially important when you
have queries inside sections).
Removes animation.`},controlled:{required:!1,tsType:{name:"boolean"},description:"Disables internal `open` state, allowing it to be controlled in the usage."}}};export{K as C};
